import{p as m,r as i,c as u,a as s,g as f,j as v,k as d,v as p,t as w,l as x,o as c}from"./Btbr7TXk.js";import{u as y}from"./CgO_7rLb.js";import"./P0UkXwgc.js";const h=m("/assets/img/logo_seskoau.png"),k={class:"min-h-screen flex items-center justify-center bg-cover bg-center",style:{"background-image":"url('/assets/img/login-bg.jpg')"}},S={class:"bg-white/60 backdrop-blur-lg border border-white/20 shadow-xl p-8 rounded-2xl w-full max-w-md"},j={key:0,class:"text-red-600 text-center mt-4"},T={__name:"index",setup(L){const l=i(""),r=i(""),o=i(""),a=x(),{user:g}=y(),b=async()=>{try{const t=await fetch("http://103.127.99.152:8888/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:l.value,password:r.value})}),e=await t.json();if(!t.ok){o.value=e.error||"Login gagal";return}switch(g.value=e.user,console.log("User role_id:",e.user.role_id),e.user.role_id){case 1:a.push("/dashboard");break;case 2:a.push("/dosen/landingMenuDosen");break;case 3:a.push("/siswa/landingMenuSiswa");break;default:a.push("/dashboard")}o.value=""}catch(t){console.error("Terjadi kesalahan saat login:",t),o.value="Terjadi kesalahan saat login"}};return(t,e)=>(c(),u("div",k,[s("div",S,[e[5]||(e[5]=s("div",{class:"flex justify-center mb-4"},[s("img",{src:h,alt:"Logo SESKO AU",class:"h-50 w-auto"})],-1)),e[6]||(e[6]=s("h2",{class:"text-3xl font-bold text-center text-gray-800 mb-6"},"LMS SESKO AU",-1)),s("form",{onSubmit:v(b,["prevent"]),class:"space-y-5"},[s("div",null,[e[2]||(e[2]=s("label",{class:"block mb-1 text-gray-600"},"Email",-1)),d(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>l.value=n),type:"email",required:"",class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"you@example.com"},null,512),[[p,l.value]])]),s("div",null,[e[3]||(e[3]=s("label",{class:"block mb-1 text-gray-600"},"Password",-1)),d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>r.value=n),type:"password",required:"",class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"••••••••"},null,512),[[p,r.value]])]),e[4]||(e[4]=s("button",{type:"submit",class:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition duration-200"}," Login ",-1))],32),o.value?(c(),u("p",j,w(o.value),1)):f("",!0)])]))}};export{T as default};
